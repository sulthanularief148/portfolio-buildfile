import{u as x,a as p,M as B,i as P,b as V,c as T,s as I,p as k,v as C,d as R,w as X}from"./motion-5337e6dd.js";import{r as m}from"./index-6596e500.js";function Y(e){const t=x(()=>p(e)),{isStatic:o}=m.useContext(B);if(o){const[,n]=m.useState(e);m.useEffect(()=>t.on("change",n),[])}return t}const q=e=>typeof e=="object"&&e.mix,F=e=>q(e)?e.mix:void 0;function G(...e){const t=!Array.isArray(e[0]),o=t?0:-1,n=e[0+o],s=e[1+o],r=e[2+o],i=e[3+o],c=P(s,r,{mixer:F(r[0]),...i});return t?c(n):c}function _(e,t){const o=Y(t()),n=()=>o.set(t());return n(),V(()=>{const s=()=>I.update(n,!1,!0),r=e.map(i=>i.on("change",s));return()=>{r.forEach(i=>i()),T.update(n)}}),o}function ve(e,t,o,n){const s=typeof t=="function"?t:G(t,o,n);return Array.isArray(e)?S(e,s):S([e],([r])=>s(r))}function S(e,t){const o=x(()=>[]);return _(e,()=>{o.length=0;const n=e.length;for(let s=0;s<n;s++)o[s]=e[s].get();return t(o)})}function D(e,t){var o;return typeof e=="string"?t?((o=t[e])!==null&&o!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const y=new WeakMap;let a;function N(e,t){if(t){const{inlineSize:o,blockSize:n}=t[0];return{width:o,height:n}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function j({target:e,contentRect:t,borderBoxSize:o}){var n;(n=y.get(e))===null||n===void 0||n.forEach(s=>{s({target:e,contentSize:t,get size(){return N(e,o)}})})}function U(e){e.forEach(j)}function $(){typeof ResizeObserver>"u"||(a=new ResizeObserver(U))}function J(e,t){a||$();const o=D(e);return o.forEach(n=>{let s=y.get(n);s||(s=new Set,y.set(n,s)),s.add(t),a==null||a.observe(n)}),()=>{o.forEach(n=>{const s=y.get(n);s==null||s.delete(t),s!=null&&s.size||a==null||a.unobserve(n)})}}const w=new Set;let v;function K(){v=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};w.forEach(o=>o(t))},window.addEventListener("resize",v)}function Q(e){return w.add(e),v||K(),()=>{w.delete(e),!w.size&&v&&(v=void 0)}}function Z(e,t){return typeof e=="function"?Q(e):J(e,t)}const ee=50,H=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),te=()=>({time:0,x:H(),y:H()}),ne={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function W(e,t,o,n){const s=o[t],{length:r,position:i}=ne[t],c=s.current,l=o.time;s.current=e["scroll"+i],s.scrollLength=e["scroll"+r]-e["client"+r],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=k(0,s.scrollLength,s.current);const f=n-l;s.velocity=f>ee?0:C(s.current-c,f)}function se(e,t,o){W(e,"x",t,o),W(e,"y",t,o),t.time=o}function oe(e,t){let o={x:0,y:0},n=e;for(;n&&n!==t;)if(n instanceof HTMLElement)o.x+=n.offsetLeft,o.y+=n.offsetTop,n=n.offsetParent;else if(n instanceof SVGGraphicsElement&&"getBBox"in n){const{top:s,left:r}=n.getBBox();for(o.x+=r,o.y+=s;n&&n.tagName!=="svg";)n=n.parentNode}return o}const re={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},L={start:0,center:.5,end:1};function A(e,t,o=0){let n=0;if(L[e]!==void 0&&(e=L[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?n=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?n=s/100*document.documentElement.clientWidth:e.endsWith("vh")?n=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(n=t*e),o+n}const ie=[0,0];function le(e,t,o,n){let s=Array.isArray(e)?e:ie,r=0,i=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,L[e]?e:"0"]),r=A(s[0],o,n),i=A(s[1],t),r-i}const ce={x:0,y:0};function fe(e,t,o){let{offset:n=re.All}=o;const{target:s=e,axis:r="y"}=o,i=r==="y"?"height":"width",c=s!==e?oe(s,e):ce,l=s===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:s.clientWidth,height:s.clientHeight},f={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let u=!t[r].interpolate;const d=n.length;for(let h=0;h<d;h++){const z=le(n[h],f[i],l[i],c[r]);!u&&z!==t[r].interpolatorOffsets[h]&&(u=!0),t[r].offset[h]=z}u&&(t[r].interpolate=P(t[r].offset,R(n)),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=t[r].interpolate(t[r].current)}function ue(e,t=e,o){if(o.x.targetOffset=0,o.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)o.x.targetOffset+=n.offsetLeft,o.y.targetOffset+=n.offsetTop,n=n.offsetParent}o.x.targetLength=t===e?t.scrollWidth:t.clientWidth,o.y.targetLength=t===e?t.scrollHeight:t.clientHeight,o.x.containerLength=e.clientWidth,o.y.containerLength=e.clientHeight}function ae(e,t,o,n={}){return{measure:()=>ue(e,n.target,o),update:s=>{se(e,o,s),(n.offset||n.target)&&fe(e,o,n)},notify:()=>t(o)}}const g=new WeakMap,O=new WeakMap,E=new WeakMap,b=e=>e===document.documentElement?window:e;function de(e,{container:t=document.documentElement,...o}={}){let n=E.get(t);n||(n=new Set,E.set(t,n));const s=te(),r=ae(t,e,s,o);if(n.add(r),!g.has(t)){const l=()=>{const u=performance.now();for(const d of n)d.measure();for(const d of n)d.update(u);for(const d of n)d.notify()};g.set(t,l);const f=b(t);window.addEventListener("resize",l,{passive:!0}),t!==document.documentElement&&O.set(t,Z(t,l)),f.addEventListener("scroll",l,{passive:!0})}const i=g.get(t),c=requestAnimationFrame(i);return()=>{var l;cancelAnimationFrame(c);const f=E.get(t);if(!f||(f.delete(r),f.size))return;const u=g.get(t);g.delete(t),u&&(b(t).removeEventListener("scroll",u),(l=O.get(t))===null||l===void 0||l(),window.removeEventListener("resize",u))}}function M(e,t){X(!!(!t||t.current))}const he=()=>({scrollX:p(0),scrollY:p(0),scrollXProgress:p(0),scrollYProgress:p(0)});function me({container:e,target:t,layoutEffect:o=!0,...n}={}){const s=x(he);return(o?V:m.useEffect)(()=>(M("target",t),M("container",e),de(({x:i,y:c})=>{s.scrollX.set(i.current),s.scrollXProgress.set(i.progress),s.scrollY.set(c.current),s.scrollYProgress.set(c.progress)},{...n,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[]),s}export{ve as a,me as u};
